<?xml version="1.0" encoding="UTF-8"?>

<features name="${framework.connect.artifact.base}-persistence" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0">

 	<repository>mvn:org.milyn/milyn-smooks-all/1.5/xml/features</repository>
   <repository>mvn:org.apache.cxf.karaf/apache-cxf/3.1.6/xml/features</repository>
   <repository>mvn:org.apache.karaf.features/enterprise/4.0.5/xml/features</repository>
   <repository>mvn:org.ops4j.pax.jdbc/pax-jdbc-features/0.8.0/xml/features</repository>
   <repository>mvn:org.apache.aries.jpa/jpa-features/2.5.0/xml/features</repository>
	<repository>mvn:org.hibernate/enterprise-4.0.5/4.3.11.Final/xml/karaf</repository>



	<!-- Hibernate bundles -->
  <feature name="hibernate" description="Hibernate  JPA persistence engine support">
	   <details>Enable Hibernate as persistence engine.</details>
	   <feature prerequisite="false" dependency="false">http</feature>
	   <feature version="[2.1.0,2.2.0)" prerequisite="false" dependency="false">persistence-api</feature>
	   <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.antlr/${org.apache.servicemix.bundles.antlr.version}</bundle>
	   <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.ant/${org.apache.servicemix.bundles.ant.version}</bundle>
	   <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.dom4j/${org.apache.servicemix.bundles.dom4j.version}</bundle>
	   <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.serp/${org.apache.servicemix.bundles.serp.version}</bundle>
	   <bundle dependency="true">mvn:com.fasterxml/classmate/${classmate.version}</bundle>
	   <bundle dependency="true">mvn:org.javassist/javassist/${org.javassist.version}</bundle>
	   <!-- <bundle dependency="true">mvn:org.jboss.spec.javax.security.jacc/jboss-jacc-api_1.4_spec/1.0.2.Final</bundle> -->
	   <bundle dependency="true">mvn:org.jboss/jandex/1.2.2.Final</bundle>
	   <bundle dependency="true">mvn:org.jboss.logging/jboss-logging/${jboss-logging.version}</bundle>
	   <bundle dependency="true">mvn:org.hibernate.common/hibernate-commons-annotations/${org.hibernate.common.version}</bundle>
	   <bundle>mvn:org.hibernate/hibernate-core/${org.hibernate.version}</bundle>
	   <bundle>mvn:org.hibernate/hibernate-entitymanager/${org.hibernate.version}</bundle>
	   <bundle>mvn:org.hibernate/hibernate-osgi/${org.hibernate.version}</bundle>
	   <bundle>mvn:org.hibernate/hibernate-osgi/${org.hibernate.version}</bundle>
	</feature>

	<feature name="PAX-JDBC-POSTGRESQL">
		<feature version = "${pax-jdbc-postgresql.version}">pax-jdbc-postgresql</feature>
	</feature>

	<!-- OSGi Transaction Manager -->
	<feature name="OSGi Transaction Manager">
		<feature version="${osgi-transaction-manager.version}">transaction</feature>
	</feature>
	
	<feature name="PAX-JDBC-POOL-DBCP2">
		<feature version="${pax-jdbc-pool-dbcp2.version}">pax-jdbc-pool-dbcp2</feature>
	</feature>
	
	<!-- Provides JDBC Config support -->
	<feature name="PAX-JDBC-CONFIG">
		<feature version="${pax-jdbc-config.version}">pax-jdbc-config</feature>
	</feature>
	
	<!-- OSGi Persistence Container -->
	<feature name="OSGi Persistence Container" >
		<feature version="${jpa-feature.version}">jpa</feature>
	</feature>

	<!-- Contexts and Dependency Injection -->
	<feature name="PAX-CDI">
		<feature version="${pax-cdi.version}">pax-cdi</feature>
	</feature>

	<!-- Parsing CSV files (Used in POC) -->
	<feature name="Camel Csv parsing" >
		<feature version="${camel-csv.version}">camel-csv</feature>
	</feature>
	
	<!-- Parsing for lifecycle-->
	<feature name="milyn-1.5">
<!-- 		TODO version management -->
		<feature version="1.5.0">smooks</feature>
	</feature>

	<!-- Framework Connect persistence bundles -->
	<feature name="${framework.connect.artifact.base}-persistence" >
		<bundle start-level="80"> mvn:com.conztanz/${framework.connect.artifact.base}-spring-context-bundle/${framework.version}</bundle>
		<bundle start-level="90">mvn:com.conztanz/${framework.connect.artifact.base}-connection-factory/${framework.version}</bundle>
<!-- 		<bundle start-level="90">mvn:com.conztanz/${framework.connect.artifact.base}-persistence-bundle/${framework.version}</bundle> -->
	</feature>
	
	<!-- Travel Connect lifecycle bundles -->
	<feature name="${framework.connect.artifact.base}-lifecycle" >
		<bundle start-level="90"> mvn:com.conztanz/travel-connect-lifecycle-initialization-bundle/1.4-SNAPSHOT</bundle>
		<bundle start-level="90"> mvn:com.conztanz/travel-connect-lifecycle-orchestration-bundle/1.4-SNAPSHOT</bundle>
		
	</feature>

	<!-- <feature>pax-jdbc-spec</feature> -->
	<!-- <feature>jndi</feature> -->
	<!-- <feature>jdbc</feature> -->
	<!-- <feature>pax-jdbc-spec</feature> -->

</features>