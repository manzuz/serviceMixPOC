<?xml version="1.0" encoding="UTF-8"?>

<!-- Fichier de configuration pour l'archive de demo (.kar) -->
<features name="demo-kar-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0">

	<!-- Enregistrera la feature pour smooks dans le registre de karaf, quand 
		le kar sera déployé -->
	<repository>mvn:org.milyn/milyn-smooks-all/1.5/xml/features</repository>
	<repository>mvn:org.apache.cxf.karaf/apache-cxf/3.1.6/xml/features</repository>
	<repository>mvn:org.apache.karaf.features/enterprise/4.0.5/xml/features</repository>
	<repository>mvn:org.ops4j.pax.jdbc/pax-jdbc-features/0.8.0/xml/features</repository>
	<repository>mvn:org.apache.aries.jpa/jpa-features/2.5.0/xml/features</repository>
<!-- 	<repository>mvn:org.hibernate/enterprise-4.0.5/4.3.11.Final/xml/karaf</repository> -->
<!-- 	 hibernate feature -->
	
	<feature name="demo-kar" version="${project.version}" description="POC - Demo karaf archive">
		<!-- Si besoin, installera et démarrera smooks quand le kar sera déployé -->
		<feature version="1.5.0">smooks</feature>
		<feature>jdbc</feature>
		<feature>pax-jdbc-spec</feature>
		<feature>transaction</feature>
		<feature>jndi</feature>
		<feature>pax-jdbc-postgresql</feature>
		<feature>pax-jdbc-pool-dbcp2</feature>
		<feature>pax-jdbc-config</feature>
		<feature>jpa</feature>
		<feature>camel-csv</feature>
		<feature version="0.12.0">pax-cdi</feature>
    </feature>
    
    
    
    
    <feature name="hibernate" description="Hibernate 4.3.x JPA persistence engine support" version="4.3.11.Final">
        <details>Enable Hibernate 4.3.x as persistence engine.</details>
        <feature prerequisite="false" dependency="false">http</feature>
        <feature version="[2.1.0,2.2.0)" prerequisite="false" dependency="false">persistence-api</feature>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.antlr/2.7.7_5</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.ant/1.8.2_2</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.dom4j/1.6.1_5</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.serp/1.14.1_1</bundle>
        <bundle dependency="true">mvn:com.fasterxml/classmate/1.1.0</bundle>
        <bundle dependency="true">mvn:org.javassist/javassist/3.18.1-GA</bundle>
        <bundle dependency="true">mvn:org.jboss.spec.javax.security.jacc/jboss-jacc-api_1.4_spec/1.0.2.Final</bundle>
        <bundle dependency="true">mvn:org.jboss/jandex/1.2.2.Final</bundle>
        <bundle dependency="true">mvn:org.jboss.logging/jboss-logging/3.1.4.GA</bundle>
        <bundle dependency="true">mvn:org.hibernate.common/hibernate-commons-annotations/4.0.5.Final</bundle>
        <bundle>mvn:org.hibernate/hibernate-core/4.3.11.Final</bundle>
        <bundle>mvn:org.hibernate/hibernate-entitymanager/4.3.11.Final</bundle>
        <bundle>mvn:org.hibernate/hibernate-osgi/4.3.11.Final</bundle>
        <bundle>mvn:org.hibernate/hibernate-osgi/4.3.11.Final</bundle>
<!--         <bundle>mvn:org.hibernate/hibernate-validator/4.2.0.Final</bundle>  -->
        
    </feature>

    
    
	<feature name="connect" version="${project.version}">
		<bundle start-level="80">mvn:com.conztanz/framework-connect-spring-context-bundle/0.4-SNAPSHOT</bundle>
		<bundle start-level="90">mvn:com.conztanz/framework-connect-connection-factory/0.4-SNAPSHOT</bundle>
		<bundle start-level="90">mvn:com.conztanz/demo-persistence/0.4-SNAPSHOT</bundle>
		<!-- Permet d'embarquer le bundle smooks 1.5 dans le kar -->
		<bundle>mvn:org.milyn/milyn-smooks-all/1.5</bundle>

		<!-- Permet de créer des bundles à partir de plain jars, et de les embarquer 
			dans le kar -->
<!-- 		<bundle>wrap:mvn:org.jibx/jibx-run/1.2.6$Bundle-SymbolicName=JibxRun&amp;Bundle-Version=1.2.6</bundle> -->
<!-- 		<bundle>wrap:mvn:com.conztanz/framework-connect-commons/0.2.1$Bundle-SymbolicName=FrameworkConnectCommons&amp;Bundle-Version=0.2.1</bundle> -->
<!-- 		<bundle>wrap:mvn:com.conztanz.third-party.sbr-stub/sbr-stub-v14_1/1.0.0$Bundle-SymbolicName=SBR_Stub14_1&amp;Bundle-Version=1.0.0</bundle> -->
		<!-- <bundle>wrap:mvn:com.conztanz/framework-persistence/${framework.version}$Bundle-SymbolicName=FrameworkPersistence&amp;Bundle-Version=${framework.version}</bundle> -->

		<!-- postgres bundle : -->
		<!-- <bundle>wrap:mvn:postgresql/postgresql/9.1-901.jdbc4</bundle> -->
		<!-- La ligne suivante permet de copier dans <servicemix>/etc le fichier 
			com.conztanz.servicemix.activemq.cfg qui est attaché au bundle kar par le 
			plugin build-helper-maven-plugin lancé à l'install du pom de ce projet. Par 
			défaut, si le fichier est déjà présent dans le dossier /etc il ne sera pas 
			remplacé. On positionne donc override à true pour que chaque déploiement 
			du kar mette à jour la config. -->
<!-- 		<configfile finalname="/etc/com.conztanz.servicemix.activemq.cfg" override="true">mvn:com.conztanz.servicemix/demo-kar/0.0.1-SNAPSHOT/cfg</configfile> -->
		<!-- <configfile finalname="/etc/org.ops4j.datasource-1.cfg" override="true">mvn:com.conztanz.servicemix/demo-kar/0.0.1-SNAPSHOT/cfg</configfile> -->
		<!-- <configfile finalname="/etc/org.ops4j.datasource-2.cfg" override="true">mvn:com.conztanz.servicemix/demo-kar/0.0.1-SNAPSHOT/cfg</configfile> -->
		<!-- <configfile finalname="/etc/activemq.xml" override="true">mvn:com.conztanz.servicemix/demo-kar/0.0.1-SNAPSHOT/cfg</configfile> -->

	</feature>

</features>